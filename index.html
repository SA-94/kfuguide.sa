<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
  <meta name="theme-color" content="#0a1020" />
  <title>جامعة الملك فيصل | مواعيد مكافأة الطلاب 2026</title>

  <style>
    :root{
      --bg1:#060913;
      --bg2:#0a1020;
      --bg3:#0c1630;

      --glass: rgba(255,255,255,.08);
      --glass2: rgba(255,255,255,.12);
      --stroke: rgba(255,255,255,.14);

      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.62);

      --gold:#d6b06a;
      --green:#2fe3a0;
      --green2:#14b87d;
      --red:#ff5a7a;

      --shadow: 0 30px 90px rgba(0,0,0,.58);
      --radius2: 26px;

      --font: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Tahoma, Arial;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: var(--font);
      color: var(--text);
      background:
        radial-gradient(1200px 900px at 12% 10%, rgba(214,176,106,.18), transparent 55%),
        radial-gradient(900px 700px at 88% 18%, rgba(47,227,160,.15), transparent 55%),
        radial-gradient(1100px 900px at 70% 95%, rgba(255,90,122,.10), transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2) 55%, var(--bg3));
      overflow-x:hidden;
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
    }

    .noise{
      position:fixed; inset:0;
      pointer-events:none;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.28'/%3E%3C/svg%3E");
      opacity:.05;
      mix-blend-mode:overlay;
      animation: floatNoise 8s linear infinite;
    }
    @keyframes floatNoise{ from{ transform:translate3d(0,0,0);} to{ transform:translate3d(-80px,60px,0);} }

    .container{
      width:min(1200px, 92vw);
      margin: 0 auto;
      padding: 18px 0 40px;
    }

    /* Top nav */
    header{
      position:sticky; top:0; z-index:50;
      backdrop-filter: blur(18px);
      background: linear-gradient(180deg, rgba(6,9,19,.86), rgba(6,9,19,.42));
      border-bottom:1px solid rgba(255,255,255,.08);
    }
    .nav{
      width:min(1200px, 92vw);
      margin: 0 auto;
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 12px 0;
      gap: 12px;
    }
    .brand{
      display:flex; align-items:center; gap:12px;
      min-width: 210px;
    }
    .logo{
      width:44px; height:44px; border-radius: 16px;
      background:
        radial-gradient(circle at 30% 30%, rgba(255,255,255,.22), transparent 45%),
        linear-gradient(135deg, rgba(214,176,106,.95), rgba(47,227,160,.70));
      box-shadow: 0 18px 55px rgba(214,176,106,.18), 0 18px 55px rgba(47,227,160,.10);
      border: 1px solid rgba(255,255,255,.18);
      display:grid; place-items:center;
      position:relative;
      overflow:hidden;
      flex:0 0 auto;
    }
    .logo::after{
      content:"";
      position:absolute; inset:-40%;
      background: radial-gradient(circle, rgba(255,255,255,.35), transparent 62%);
      transform: rotate(35deg);
      animation: shine 3.6s ease-in-out infinite;
      opacity:.55;
    }
    @keyframes shine{
      0%,100%{ transform: translateX(-12%) rotate(35deg); opacity:.25;}
      50%{ transform: translateX(12%) rotate(35deg); opacity:.55;}
    }
    .logo span{ font-weight:950; letter-spacing:.6px; color:#071018; }

    .brand h1{
      margin:0;
      font-size: 14px;
      line-height: 1.2;
      font-weight: 980;
      letter-spacing:.2px;
    }

    .nav-actions{
      display:flex; gap:10px; align-items:center; flex-wrap:wrap;
      justify-content:flex-end;
    }

    .pill{
      padding: 9px 12px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.70);
      font-size: 12px;
      font-weight: 900;
      display:flex; align-items:center; gap:8px;
      white-space:nowrap;
    }
    .dot{ width:8px; height:8px; border-radius:50%; background: var(--green); box-shadow:0 0 18px rgba(47,227,160,.55); }

    .btn{
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: var(--text);
      padding: 11px 12px;
      border-radius: 16px;
      cursor:pointer;
      font-weight:950;
      display:inline-flex;
      gap:10px;
      align-items:center;
      transition: transform .15s ease, background .2s ease, border-color .2s ease;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }
    .btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.10); border-color: rgba(255,255,255,.22); }
    .btn:active{ transform: translateY(0px) scale(.99); }
    .btn.primary{
      background: linear-gradient(135deg, rgba(214,176,106,.95), rgba(47,227,160,.72));
      color:#071018;
      border-color: rgba(255,255,255,.22);
      box-shadow: 0 18px 55px rgba(47,227,160,.12), 0 18px 55px rgba(214,176,106,.12);
    }

    /* WhatsApp icon button (top) */
    .iconBtn{
      width: 42px;
      height: 42px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      display:grid;
      place-items:center;
      cursor:pointer;
      transition: transform .15s ease, background .2s ease, border-color .2s ease;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }
    .iconBtn:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.10);
      border-color: rgba(255,255,255,.22);
    }
    .iconBtn:active{ transform: translateY(0px) scale(.99); }
    .waSvg{ width: 20px; height: 20px; display:block; }
    .waTop{
      border-color: rgba(47,227,160,.30);
      background: rgba(47,227,160,.10);
    }

    /* cards */
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.11), rgba(255,255,255,.06));
      border: 1px solid rgba(255,255,255,.12);
      border-radius: var(--radius2);
      box-shadow: var(--shadow);
      backdrop-filter: blur(18px);
      overflow:hidden;
      position:relative;
    }
    .card::before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(650px 240px at 25% 20%, rgba(214,176,106,.14), transparent 60%),
                  radial-gradient(560px 240px at 80% 30%, rgba(47,227,160,.12), transparent 60%),
                  radial-gradient(540px 240px at 70% 100%, rgba(255,90,122,.10), transparent 60%);
      filter: blur(2px);
      pointer-events:none;
    }
    .card > *{ position:relative; }

    .hero{
      padding: 16px 0 10px;
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap: 16px;
      align-items:stretch;
    }
    @media (max-width: 980px){
      .hero{ grid-template-columns:1fr; }
      .pill{ display:none; }
    }

    .hero-left{
      padding: 18px;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      gap: 12px;
      min-height: 240px;
    }

    .title{
      margin:0;
      font-size: clamp(22px, 3vw, 34px);
      line-height: 1.25;
      font-weight: 990;
      letter-spacing:.2px;
    }

    .hero-actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      margin-top: 10px;
    }

    .note{
      margin-top: 10px;
      padding: 12px 14px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: var(--muted);
      font-size: 12px;
      line-height: 2.05;
    }
    .note b{ color: rgba(255,255,255,.90); }

    .hero-right{
      padding: 14px;
      display:flex;
      flex-direction:column;
      gap: 12px;
    }
    .box{
      padding: 14px;
      border-radius: var(--radius2);
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      display:grid;
      gap: 10px;
    }

    .boxTop{
      display:flex; align-items:flex-start; justify-content:space-between; gap:10px;
    }
    .boxTop h3{
      margin:0;
      font-size: 14px;
      font-weight: 980;
      color: rgba(255,255,255,.92);
    }
    .boxTop p{
      margin: 4px 0 0;
      color: rgba(255,255,255,.68);
      font-size: 12px;
      line-height: 1.9;
    }

    .badge{
      display:inline-flex; align-items:center; gap:8px;
      padding: 8px 10px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 950;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      white-space:nowrap;
    }
    .badge.good{ border-color: rgba(47,227,160,.26); background: rgba(47,227,160,.10); }
    .badge.warn{ border-color: rgba(214,176,106,.26); background: rgba(214,176,106,.10); }
    .badge.bad{ border-color: rgba(255,90,122,.28); background: rgba(255,90,122,.10); }

    /* Progress ring (المتبقي) */
    .ringWrap{
      display:grid;
      place-items:center;
      padding: 8px 0 2px;
    }
    .ring{
      width: 150px;
      height: 150px;
      border-radius: 999px;
      display:grid;
      place-items:center;
      background:
        radial-gradient(circle at 50% 50%, rgba(0,0,0,.18) 55%, transparent 56%),
        conic-gradient(var(--green) var(--p), rgba(255,255,255,.10) 0);
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: 0 18px 70px rgba(0,0,0,.35);
      position:relative;
      transition: background .35s ease;
    }
    .ring::after{
      content:"";
      position:absolute;
      inset: 12px;
      border-radius: 999px;
      background:
        radial-gradient(circle at 30% 30%, rgba(255,255,255,.14), transparent 55%),
        rgba(10,14,24,.60);
      border: 1px solid rgba(255,255,255,.10);
      backdrop-filter: blur(10px);
    }
    .ringContent{
      position:relative;
      text-align:center;
      z-index:1;
    }
    .ringContent b{
      display:block;
      font-size: 22px;
      font-weight: 980;
      letter-spacing:.4px;
    }
    .ringContent span{
      display:block;
      margin-top: 6px;
      font-size: 12px;
      font-weight: 950;
      color: rgba(255,255,255,.65);
    }

    /* Countdown */
    .countdown{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
    }
    .cd{
      padding: 12px 10px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.14);
      text-align:center;
      min-height: 64px;
      display:grid;
      place-items:center;
      gap:4px;
    }
    .cd b{
      display:block;
      font-size: 18px;
      font-weight: 980;
      letter-spacing: .5px;
      line-height: 1.1;
    }
    .cd span{
      display:block;
      font-size: 12px;
      color: rgba(255,255,255,.65);
      font-weight: 900;
    }

    .divider{
      height:1px;
      background: rgba(255,255,255,.10);
      margin: 6px 0;
    }
    .mini{
      display:flex; gap:10px; flex-wrap:wrap;
      color: rgba(255,255,255,.65);
      font-size: 12px;
      line-height: 1.95;
    }
    .mini strong{ color: rgba(255,255,255,.88); }

    /* Schedule */
    .section{
      margin-top: 16px;
      padding: 16px;
    }
    .sectionHead{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap: 12px;
      flex-wrap:wrap;
      margin-bottom: 12px;
    }
    .sectionHead h2{
      margin:0;
      font-size: 16px;
      font-weight: 980;
      letter-spacing:.2px;
    }
    .sectionHead p{
      margin: 6px 0 0;
      color: rgba(255,255,255,.62);
      font-size: 12px;
      line-height: 1.95;
      max-width: 78ch;
    }

    .rowsPill{
      padding: 9px 12px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.82);
      font-size: 12px;
      font-weight: 950;
      display:flex; align-items:center; gap:8px;
      white-space:nowrap;
    }

    .controls{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      align-items:center;
      margin-top: 10px;
      width:100%;
    }
    .select, .input{
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: var(--text);
      font-weight: 950;
      font-size: 14px;
      outline:none;
    }
    .select{
      padding: 12px 12px;
      cursor:pointer;
      width: min(260px, 100%);
    }
    .input{
      display:flex; gap:10px; align-items:center;
      padding: 12px 12px;
      width: min(420px, 100%);
    }
    .input input{
      width:100%;
      outline:none;
      border:none;
      background: transparent;
      color: var(--text);
      font-weight: 900;
      font-size: 14px;
    }

    /* Desktop table */
    .tableWrap{ overflow:auto; padding-bottom:6px; }
    table{
      width:100%;
      border-collapse:separate;
      border-spacing:0 10px;
      min-width: 760px;
    }
    thead th{
      font-size: 12px;
      color: rgba(255,255,255,.62);
      font-weight: 950;
      text-align:right;
      padding: 0 12px 8px;
      white-space:nowrap;
    }
    tbody tr{
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: 0 18px 40px rgba(0,0,0,.25);
      overflow:hidden;
    }
    tbody tr td{
      padding: 14px 12px;
      border-top: 1px solid rgba(255,255,255,.10);
      border-bottom: 1px solid rgba(255,255,255,.10);
      font-weight: 950;
      font-size: 13px;
    }
    tbody tr td:first-child{
      border-right: 1px solid rgba(255,255,255,.10);
      border-top-right-radius: 16px;
      border-bottom-right-radius: 16px;
    }
    tbody tr td:last-child{
      border-left: 1px solid rgba(255,255,255,.10);
      border-top-left-radius: 16px;
      border-bottom-left-radius: 16px;
    }

    .chip{
      display:inline-flex; align-items:center; gap:8px;
      padding: 7px 10px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.10);
      font-size:12px;
      font-weight: 980;
      white-space:nowrap;
    }
    .chip.gold{ border-color: rgba(214,176,106,.28); background: rgba(214,176,106,.10); }
    .chip.green{ border-color: rgba(47,227,160,.30); background: rgba(47,227,160,.10); }

    /* Mobile cards */
    .cards{ display:none; }
    @media (max-width: 700px){
      .container{ width: min(100%, 94vw); }
      .nav{ padding: 10px 0; }
      .brand h1{ font-size: 13px; }
      .btn{ padding: 12px 12px; border-radius: 16px; }
      .iconBtn{ width:44px; height:44px; }
      .hero-left{ padding: 16px; }
      .hero-right{ padding: 12px; }
      .countdown{ gap: 8px; }
      .cd{ min-height: 62px; }
      .tableWrap{ display:none; }
      table{ display:none; }
      .cards{ display:grid; gap: 10px; }
      .select,.input{ width: 100%; }
    }

    .payCard{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      padding: 12px;
    }
    .payTop{
      display:flex; justify-content:space-between; align-items:flex-start; gap:10px;
      margin-bottom: 10px;
    }
    .payTitle{ font-weight: 980; font-size: 14px; }
    .paySub{
      margin-top: 4px;
      color: rgba(255,255,255,.62);
      font-weight: 900;
      font-size: 12px;
      line-height: 1.9;
    }
    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
      margin-top: 10px;
    }
    .kv{
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.10);
      border-radius: 14px;
      padding: 10px;
    }
    .kv span{
      display:block;
      color: rgba(255,255,255,.62);
      font-size: 11px;
      font-weight: 950;
    }
    .kv b{
      display:block;
      margin-top: 6px;
      font-size: 13px;
      font-weight: 980;
    }

    /* Footer */
    footer{
      margin-top: 18px;
      padding: 22px 0 28px;
      color: rgba(255,255,255,.60);
      font-size: 12px;
    }
    .footerBox{
      width:min(1200px, 92vw);
      margin: 0 auto;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 10px;
      flex-wrap:wrap;
      border-top: 1px solid rgba(255,255,255,.08);
      padding-top: 16px;
    }

    /* Modal */
    .modal-backdrop{
      position:fixed; inset:0;
      background: rgba(0,0,0,.58);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 14px;
      z-index: 200;
    }
    .modal{
      width: min(760px, 96vw);
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.14);
      background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
      backdrop-filter: blur(18px);
      box-shadow: 0 40px 120px rgba(0,0,0,.65);
      overflow:hidden;
      max-height: 86vh;
      display:flex;
      flex-direction:column;
    }
    .modal header{
      position:relative;
      background: transparent;
      border-bottom: 1px solid rgba(255,255,255,.10);
      backdrop-filter:none;
    }
    .modalHead{
      display:flex; align-items:center; justify-content:space-between;
      padding: 14px 16px;
      gap: 10px;
    }
    .modalHead h3{ margin:0; font-size: 14px; font-weight: 980; }
    .modalBody{
      padding: 14px 16px 16px;
      color: rgba(255,255,255,.84);
      font-size: 13px;
      line-height: 2.05;
      overflow:auto;
    }
    .modalBody ul{ margin: 8px 0 0; padding: 0 18px 0 0; }
    .close{
      border:none;
      background: rgba(255,255,255,.08);
      color: rgba(255,255,255,.92);
      border: 1px solid rgba(255,255,255,.14);
      padding: 10px 12px;
      border-radius: 14px;
      cursor:pointer;
      font-weight: 980;
      touch-action: manipulation;
    }
    .modal-backdrop.show{ display:flex; }

    /* WhatsApp (floating round icon only) */
    .waFloat{
      position:fixed;
      right: 16px;
      bottom: 16px;
      z-index: 210;
      width: 56px;
      height: 56px;
      border-radius: 999px;
      display:grid;
      place-items:center;
      text-decoration:none;
      background: linear-gradient(135deg, rgba(47,227,160,.95), rgba(20,184,125,.88));
      border: 1px solid rgba(255,255,255,.18);
      box-shadow: 0 20px 70px rgba(47,227,160,.20);
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }
    .waFloat:active{ transform: scale(.98); }
    .waFloat svg{ width: 24px; height: 24px; }

    /* WhatsApp button inside modal */
    .waModalRow{
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
      margin-top: 12px;
      padding: 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
    }
    .waNumber{
      font-weight: 980;
      color: rgba(255,255,255,.92);
    }
    .waModalBtn{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding: 10px 12px;
      border-radius: 16px;
      border: 1px solid rgba(47,227,160,.30);
      background: rgba(47,227,160,.12);
      color: rgba(255,255,255,.92);
      font-weight: 980;
      cursor:pointer;
      text-decoration:none;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }
    .waModalBtn svg{ width:18px; height:18px; }
  </style>
</head>

<body>
  <div class="noise"></div>

  <!-- NAV -->
  <header>
    <div class="nav" role="navigation" aria-label="شريط التنقل">
      <div class="brand">
        <div class="logo" aria-hidden="true"><span>KF</span></div>
        <div>
          <h1>جامعة الملك فيصل</h1>
        </div>
      </div>

      <div class="nav-actions">
        <div class="pill" title="الحالة">
          <span class="dot" aria-hidden="true"></span>
          <span>بيانات 2026</span>
        </div>

        <button class="btn" id="btnAbout">من أنا</button>

        <!-- WhatsApp icon next to "من أنا" -->
        <a class="iconBtn waTop" href="https://wa.me/966535964292" target="_blank" rel="noopener" aria-label="واتساب">
          <svg class="waSvg" viewBox="0 0 32 32" fill="none" aria-hidden="true">
            <path fill="currentColor" d="M16 3C9.1 3 3.5 8.6 3.5 15.5c0 2.4.7 4.7 2 6.7L4 29l7-1.8c1.9 1 4 1.6 6 1.6 6.9 0 12.5-5.6 12.5-12.5S22.9 3 16 3Zm0 23.2c-1.8 0-3.6-.5-5.1-1.5l-.4-.2-4.1 1.1 1.1-4-.3-.4c-1.1-1.6-1.7-3.5-1.7-5.5C5.5 9.8 10.2 5 16 5s10.5 4.8 10.5 10.5S21.8 26.2 16 26.2Z"/>
            <path fill="currentColor" d="M22.2 18.6c-.3-.1-1.8-.9-2.1-1s-.5-.1-.7.1-.8 1-.9 1.2-.3.2-.6.1c-.3-.1-1.2-.4-2.3-1.4-.8-.7-1.4-1.6-1.5-1.9s0-.4.1-.5c.1-.1.3-.3.4-.5.1-.1.2-.3.3-.5.1-.2 0-.4 0-.6s-.7-1.7-.9-2.3c-.2-.6-.5-.5-.7-.5h-.6c-.2 0-.5.1-.7.4-.2.3-.9.9-.9 2.3s1 2.7 1.2 2.9c.1.2 1.9 2.9 4.6 4.1.6.3 1.1.4 1.5.5.6.2 1.2.2 1.7.1.5-.1 1.8-.7 2.1-1.4.3-.7.3-1.3.2-1.4-.1-.1-.3-.2-.6-.3Z"/>
          </svg>
        </a>

        <button class="btn primary" id="btnScroll">المواعيد</button>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- HERO -->
    <section class="hero">
      <div class="card hero-left">
        <div>
          <h2 class="title">مواعيد صرف مكافأة الطلاب لعام 2026</h2>

          <div class="hero-actions">
            <button class="btn primary" id="btnCopyNext">نسخ الموعد القادم</button>
            <button class="btn" id="btnToday">شهر اليوم</button>
            <button class="btn" id="btnReset">إعادة ضبط</button>
          </div>
        </div>

        <div class="note">
          <b>تنبيه:</b> هذه الصفحة للتنظيم فقط والمرجع النهائي القنوات الرسمية.
        </div>
      </div>

      <aside class="card hero-right" aria-label="لوحة الموعد القادم">
        <div class="box">
          <div class="boxTop">
            <div>
              <h3>الصرف القادم</h3>
              <p id="nextMeta">جارٍ التحميل…</p>
            </div>
            <div class="badge good" id="nextBadge">قريب</div>
          </div>

          <div class="ringWrap" aria-label="نسبة المتبقي للصرف القادم">
            <div class="ring" id="ring" style="--p: 0deg;">
              <div class="ringContent">
                <b id="ringPct">0%</b>
                <span>المتبقي للصرف</span>
              </div>
            </div>
          </div>

          <div class="countdown" aria-label="العدّاد التنازلي">
            <div class="cd"><b id="d">—</b><span>يوم</span></div>
            <div class="cd"><b id="h">—</b><span>ساعة</span></div>
            <div class="cd"><b id="m">—</b><span>دقيقة</span></div>
            <div class="cd"><b id="s">—</b><span>ثانية</span></div>
          </div>

          <div class="divider"></div>

          <div class="mini">
            <span><strong>قاعدة 27:</strong></span>
            <span>الجمعة → الخميس قبلها • السبت → الأحد بعدها</span>
          </div>
        </div>
      </aside>
    </section>

    <!-- SCHEDULE -->
    <section class="card section" id="schedule">
      <div class="sectionHead">
        <div>
          <h2>جدول المواعيد</h2>
          <p>بحث وفلترة مباشرة حسب الشهر/اليوم/التاريخ.</p>

          <div class="controls">
            <select class="select" id="monthSelect" aria-label="اختر شهر ميلادي">
              <option value="">كل الأشهر</option>
            </select>

            <div class="input" aria-label="بحث">
              <span style="font-weight:980; opacity:.9">⌕</span>
              <input id="searchInput" placeholder="اكتب: مارس / الخميس / 27/10..." />
            </div>
          </div>
        </div>

        <div class="rowsPill">
          <span style="font-weight:980">⟡</span>
          <span id="rowsCount">—</span>
        </div>
      </div>

      <div class="tableWrap">
        <table aria-label="جدول مواعيد الصرف (كمبيوتر)">
          <thead>
            <tr>
              <th>الشهر الميلادي</th>
              <th>اليوم</th>
              <th>التاريخ الميلادي</th>
              <th>الشهر الهجري</th>
              <th>التاريخ الهجري</th>
            </tr>
          </thead>
          <tbody id="tbody"></tbody>
        </table>
      </div>

      <div class="cards" id="cards" aria-label="مواعيد الصرف (جوال)"></div>

      <div class="note">
        <b>ملاحظة:</b> قد تتغير المواعيد حسب التحديثات الرسمية أو الإجراءات البنكية.
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    <div class="footerBox">
      <div>© <span id="yearNow"></span> — جميع الحقوق محفوظة</div>
      <div class="pill">بدون تتبع</div>
    </div>
  </footer>

  <!-- About Modal -->
  <div class="modal-backdrop" id="aboutBackdrop" role="dialog" aria-modal="true" aria-label="من أنا">
    <div class="modal">
      <header>
        <div class="modalHead">
          <h3>تعريف مختصر</h3>
          <button class="close" id="btnCloseModal">إغلاق</button>
        </div>
      </header>

      <div class="modalBody">
        <p>
          أهلاً، أنا <b>فهد القحطاني</b> — طالب في <b>جامعة الملك فيصل</b>،
          <b>كلية العلوم الزراعية والأغذية</b>. أقدّم خدمات طلابية شاملة بطريقة واضحة ومرتبة،
          وأساعد في حل المشكلات الطلابية وشرح ما يخص أنظمة وإجراءات الجامعة.
        </p>

        <ul>
          <li><b>حلول للمشكلات الطلابية</b> بخطوات عملية للوصول للحل.</li>
          <li><b>شرح الخدمات والإجراءات</b> (مكافأة، تسجيل، جداول، بوابات الجامعة).</li>
          <li><b>تبسيط المطلوب</b> وتحديد المسار الصحيح بسرعة.</li>
        </ul>

        <div class="waModalRow">
          <div>
            <div style="font-weight:980; margin-bottom:6px;">للتواصل واتساب</div>
            <div class="waNumber">+966535964292</div>
          </div>

          <a class="waModalBtn" href="https://wa.me/966535964292" target="_blank" rel="noopener">
            <svg viewBox="0 0 32 32" fill="none" aria-hidden="true">
              <path fill="currentColor" d="M16 3C9.1 3 3.5 8.6 3.5 15.5c0 2.4.7 4.7 2 6.7L4 29l7-1.8c1.9 1 4 1.6 6 1.6 6.9 0 12.5-5.6 12.5-12.5S22.9 3 16 3Zm0 23.2c-1.8 0-3.6-.5-5.1-1.5l-.4-.2-4.1 1.1 1.1-4-.3-.4c-1.1-1.6-1.7-3.5-1.7-5.5C5.5 9.8 10.2 5 16 5s10.5 4.8 10.5 10.5S21.8 26.2 16 26.2Z"/>
              <path fill="currentColor" d="M22.2 18.6c-.3-.1-1.8-.9-2.1-1s-.5-.1-.7.1-.8 1-.9 1.2-.3.2-.6.1c-.3-.1-1.2-.4-2.3-1.4-.8-.7-1.4-1.6-1.5-1.9s0-.4.1-.5c.1-.1.3-.3.4-.5.1-.1.2-.3.3-.5.1-.2 0-.4 0-.6s-.7-1.7-.9-2.3c-.2-.6-.5-.5-.7-.5h-.6c-.2 0-.5.1-.7.4-.2.3-.9.9-.9 2.3s1 2.7 1.2 2.9c.1.2 1.9 2.9 4.6 4.1.6.3 1.1.4 1.5.5.6.2 1.2.2 1.7.1.5-.1 1.8-.7 2.1-1.4.3-.7.3-1.3.2-1.4-.1-.1-.3-.2-.6-.3Z"/>
            </svg>
            فتح واتساب
          </a>
        </div>

        <p style="margin-top:12px; color: rgba(255,255,255,.70);">
          * يتم تقديم المساعدة بما يتوافق مع الأنظمة، والمرجع النهائي دائمًا القنوات الرسمية.
        </p>
      </div>
    </div>
  </div>

  <!-- WhatsApp Floating Round Icon -->
  <a class="waFloat" href="https://wa.me/966535964292" target="_blank" rel="noopener" aria-label="واتساب">
    <svg viewBox="0 0 32 32" fill="none" aria-hidden="true">
      <path fill="#061018" d="M16 3C9.1 3 3.5 8.6 3.5 15.5c0 2.4.7 4.7 2 6.7L4 29l7-1.8c1.9 1 4 1.6 6 1.6 6.9 0 12.5-5.6 12.5-12.5S22.9 3 16 3Zm0 23.2c-1.8 0-3.6-.5-5.1-1.5l-.4-.2-4.1 1.1 1.1-4-.3-.4c-1.1-1.6-1.7-3.5-1.7-5.5C5.5 9.8 10.2 5 16 5s10.5 4.8 10.5 10.5S21.8 26.2 16 26.2Z"/>
      <path fill="#061018" d="M22.2 18.6c-.3-.1-1.8-.9-2.1-1s-.5-.1-.7.1-.8 1-.9 1.2-.3.2-.6.1c-.3-.1-1.2-.4-2.3-1.4-.8-.7-1.4-1.6-1.5-1.9s0-.4.1-.5c.1-.1.3-.3.4-.5.1-.1.2-.3.3-.5.1-.2 0-.4 0-.6s-.7-1.7-.9-2.3c-.2-.6-.5-.5-.7-.5h-.6c-.2 0-.5.1-.7.4-.2.3-.9.9-.9 2.3s1 2.7 1.2 2.9c.1.2 1.9 2.9 4.6 4.1.6.3 1.1.4 1.5.5.6.2 1.2.2 1.7.1.5-.1 1.8-.7 2.1-1.4.3-.7.3-1.3.2-1.4-.1-.1-.3-.2-.6-.3Z"/>
    </svg>
  </a>

  <script>
    // ====== بيانات 2026 (ثابتة) ======
    const schedule = [
      { gMonth:"يناير",    day:"الثلاثاء", gDate:"27/01/2026", hMonth:"شعبان",       hDate:"08/08/1447" },
      { gMonth:"فبراير",   day:"الخميس",   gDate:"26/02/2026", hMonth:"رمضان",       hDate:"09/09/1447" },
      { gMonth:"مارس",     day:"الخميس",   gDate:"26/03/2026", hMonth:"شوال",        hDate:"07/10/1447" },
      { gMonth:"أبريل",    day:"الاثنين",  gDate:"27/04/2026", hMonth:"ذو القعدة",   hDate:"10/11/1447" },
      { gMonth:"مايو",     day:"الأحد",    gDate:"24/05/2026", hMonth:"ذو الحجة",    hDate:"07/12/1447" },
      { gMonth:"يونيو",    day:"الأحد",    gDate:"28/06/2026", hMonth:"محرم",        hDate:"13/01/1448" },
      { gMonth:"يوليو",    day:"الاثنين",  gDate:"27/07/2026", hMonth:"صفر",         hDate:"13/02/1448" },
      { gMonth:"أغسطس",    day:"الخميس",   gDate:"27/08/2026", hMonth:"ربيع الأول",  hDate:"14/03/1448" },
      { gMonth:"سبتمبر",   day:"الأحد",    gDate:"27/09/2026", hMonth:"ربيع الثاني", hDate:"16/04/1448" },
      { gMonth:"أكتوبر",   day:"الثلاثاء", gDate:"27/10/2026", hMonth:"جماد الأول",  hDate:"16/05/1448" },
      { gMonth:"نوفمبر",   day:"الخميس",   gDate:"26/11/2026", hMonth:"جماد الآخرة", hDate:"16/06/1448" },
      { gMonth:"ديسمبر",   day:"الأحد",    gDate:"27/12/2026", hMonth:"رجب",         hDate:"18/07/1448" }
    ];

    const tbody = document.getElementById("tbody");
    const cards = document.getElementById("cards");
    const rowsCount = document.getElementById("rowsCount");
    const monthSelect = document.getElementById("monthSelect");
    const searchInput = document.getElementById("searchInput");

    const nextMeta = document.getElementById("nextMeta");
    const nextBadge = document.getElementById("nextBadge");

    const yearNow = document.getElementById("yearNow");
    const dEl = document.getElementById("d");
    const hEl = document.getElementById("h");
    const mEl = document.getElementById("m");
    const sEl = document.getElementById("s");

    const ring = document.getElementById("ring");
    const ringPct = document.getElementById("ringPct");

    function parseDateDMY(str){
      const [dd,mm,yy] = str.split("/").map(n=>parseInt(n,10));
      return new Date(yy, mm-1, dd, 0,0,0,0);
    }
    function pad2(n){ return String(n).padStart(2,"0"); }

    function initMonthSelect(){
      const months = [...new Set(schedule.map(x=>x.gMonth))];
      months.forEach(m=>{
        const opt = document.createElement("option");
        opt.value = m;
        opt.textContent = m;
        monthSelect.appendChild(opt);
      });
    }

    function renderTable(list){
      tbody.innerHTML = "";
      for(const r of list){
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td><span class="chip gold">${r.gMonth}</span></td>
          <td><span class="chip green">${r.day}</span></td>
          <td><span class="chip">${r.gDate}</span></td>
          <td><span class="chip">${r.hMonth}</span></td>
          <td><span class="chip">${r.hDate}</span></td>
        `;
        tbody.appendChild(tr);
      }
    }

    function renderCards(list){
      cards.innerHTML = "";
      for(const r of list){
        const el = document.createElement("div");
        el.className = "payCard";
        el.innerHTML = `
          <div class="payTop">
            <div>
              <div class="payTitle">${r.gMonth} • ${r.day}</div>
              <div class="paySub">التاريخ الميلادي: <b style="color:rgba(255,255,255,.92)">${r.gDate}</b></div>
            </div>
            <span class="chip gold">${r.hMonth}</span>
          </div>
          <div class="grid">
            <div class="kv"><span>اليوم</span><b>${r.day}</b></div>
            <div class="kv"><span>ميلادي</span><b>${r.gDate}</b></div>
            <div class="kv"><span>هجري</span><b>${r.hDate}</b></div>
            <div class="kv"><span>الشهر الهجري</span><b>${r.hMonth}</b></div>
          </div>
        `;
        cards.appendChild(el);
      }
    }

    function applyFilters(){
      const selectedMonth = monthSelect.value;
      const q = (searchInput.value || "").trim().toLowerCase();

      let filtered = schedule.slice();
      if(selectedMonth){
        filtered = filtered.filter(r => r.gMonth === selectedMonth);
      }
      if(q){
        filtered = filtered.filter(r => {
          const blob = `${r.gMonth} ${r.day} ${r.gDate} ${r.hMonth} ${r.hDate}`.toLowerCase();
          return blob.includes(q);
        });
      }

      renderTable(filtered);
      renderCards(filtered);
      rowsCount.textContent = `${filtered.length} موعد`;
    }

    function findNextPayout(){
      const now = new Date();
      const today0 = new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime();

      const upcoming = schedule
        .map(r => ({...r, dt: parseDateDMY(r.gDate)}))
        .filter(r => r.dt.getTime() >= today0)
        .sort((a,b)=>a.dt-b.dt);

      return upcoming[0] || schedule.map(r=>({...r, dt: parseDateDMY(r.gDate)})).sort((a,b)=>a.dt-b.dt).slice(-1)[0];
    }

    // إصلاح 0% لأول موعد في السنة: نعتبر بداية دورة قبل 30 يوم
    function findPrevPayout(next){
      const all = schedule.map(r => ({...r, dt: parseDateDMY(r.gDate)})).sort((a,b)=>a.dt-b.dt);
      const idx = all.findIndex(x => x.gDate === next.gDate);
      if(idx <= 0){
        return { dt: new Date(next.dt.getTime() - 30 * 24 * 60 * 60 * 1000) };
      }
      return all[idx - 1];
    }

    function badgeForDiff(ms){
      const dayMs = 24*60*60*1000;
      const days = Math.floor(ms/dayMs);
      if(ms <= 0) return { cls:"good", text:"حان الموعد" };
      if(days <= 7) return { cls:"good", text:"قريب جدًا" };
      if(days <= 21) return { cls:"warn", text:"قريب" };
      return { cls:"bad", text:"بعيد" };
    }

    let next = null;
    function updateNextBox(){
      next = findNextPayout();
      const dt = next.dt;

      const weekday = new Intl.DateTimeFormat("ar-SA", { weekday:"long" }).format(dt);
      const pretty = new Intl.DateTimeFormat("ar-SA", { year:"numeric", month:"long", day:"numeric" }).format(dt);
      nextMeta.textContent = `الموعد: ${pretty} • (${weekday}) — ${next.gMonth} / ${next.gDate}`;

      const now = new Date();
      const diff = dt.getTime() - now.getTime();

      const b = badgeForDiff(diff);
      nextBadge.className = `badge ${b.cls}`;
      nextBadge.textContent = b.text;

      // Countdown
      const total = Math.max(0, diff);
      const sec = Math.floor(total/1000);
      const days = Math.floor(sec / (24*3600));
      const hours = Math.floor((sec % (24*3600)) / 3600);
      const mins = Math.floor((sec % 3600) / 60);
      const secs = sec % 60;

      dEl.textContent = pad2(days);
      hEl.textContent = pad2(hours);
      mEl.textContent = pad2(mins);
      sEl.textContent = pad2(secs);

      // Progress ring: نسبة المتبقي حتى الصرف القادم
      const prev = findPrevPayout(next);
      const start = prev.dt.getTime();
      const end = dt.getTime();
      const nowMs = now.getTime();

      const span = Math.max(1, end - start);
      const remaining = Math.min(span, Math.max(0, end - nowMs));
      const remainingPct = Math.round((remaining / span) * 100);

      ringPct.textContent = `${remainingPct}%`;
      const deg = Math.round(360 * (remainingPct/100));
      ring.style.setProperty("--p", `${deg}deg`);
    }

    // Modal
    const aboutBackdrop = document.getElementById("aboutBackdrop");
    const btnAbout = document.getElementById("btnAbout");
    const btnCloseModal = document.getElementById("btnCloseModal");
    function openModal(){ aboutBackdrop.classList.add("show"); }
    function closeModal(){ aboutBackdrop.classList.remove("show"); }
    btnAbout.addEventListener("click", openModal);
    btnCloseModal.addEventListener("click", closeModal);
    aboutBackdrop.addEventListener("click", (e)=>{ if(e.target === aboutBackdrop) closeModal(); });
    document.addEventListener("keydown", (e)=>{ if(e.key === "Escape") closeModal(); });

    // Buttons
    document.getElementById("btnScroll").addEventListener("click", ()=>{
      document.getElementById("schedule").scrollIntoView({behavior:"smooth", block:"start"});
    });

    document.getElementById("btnReset").addEventListener("click", ()=>{
      monthSelect.value = "";
      searchInput.value = "";
      applyFilters();
    });

    document.getElementById("btnToday").addEventListener("click", ()=>{
      const now = new Date();
      const map = ["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];
      monthSelect.value = map[now.getMonth()] || "";
      applyFilters();
    });

    document.getElementById("btnCopyNext").addEventListener("click", async ()=>{
      if(!next) return;
      const text = `موعد مكافأة الطلاب القادم: ${next.gMonth} - ${next.day} - ${next.gDate} (هجري: ${next.hMonth} ${next.hDate})`;
      try{
        await navigator.clipboard.writeText(text);
        const btn = document.getElementById("btnCopyNext");
        const old = btn.textContent;
        btn.textContent = "تم النسخ";
        setTimeout(()=> btn.textContent = old, 1200);
      }catch{
        alert(text);
      }
    });

    monthSelect.addEventListener("change", applyFilters);
    searchInput.addEventListener("input", applyFilters);

    // Init
    yearNow.textContent = new Date().getFullYear();
    initMonthSelect();
    applyFilters();
    updateNextBox();
    setInterval(updateNextBox, 1000);
  </script>
</body>
</html>
